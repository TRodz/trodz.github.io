<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Esqueleto básico de un juego (Java)</title>
    <meta name="description" content="" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="../assets/css/ghostion.min.css" />

    <!-- <link rel="stylesheet" href="/assets/css/ghostion.custom.css" /> -->

    <meta name="generator" content="Ghost 0.5" />
<link rel="alternate" type="application/rss+xml" title="El aprendiz del game design" href="../rss/index.html">
<link rel="canonical" href="http://trodz.github.io/creando-el-esqueleto-de-un-juego-en-java-2/" />
</head>
<body class="post-template">
    <div id="at_page_surround">
        <div id="at_body">
            
<div class="left-off-canvas-menu">
	<ul class="off-canvas-list">
		<li><label>Menu principal </label></li>
		<li><a class="at_menu_item" href="http://trodz.github.io"><span class="fa fa-home"></span> Inicio</a></li>
		<li><a class="at_menu_item" href="http://trodz.github.io/about"><span class="fa fa-user"></span> Acerca</a></li>
	</ul>
</div>
<div id="at_header">
    <div class="row">
        <div class="medium-4 columns">
            <div class="at_logo_container">
                        <a href="http://trodz.github.io">
                    <span class="at_logo_text">El aprendiz del game design</span></a>
            </div>
        </div>
        <div class="medium-4 columns text-right hide-for-small-only">
            <div class="at_icon_menu">
                <a class="at_icon_menu_item" href="http://trodz.github.io/about" data-tooltip class="has-tip" title="Acerca"><span class="fa fa-user"></span></a>
                <a class="at_icon_menu_item" href="https://github.com/TRodz/" data-tooltip class="has-tip" title="Github"><span class="fa fa-github"></span> <span></span></a>
                <a class="at_icon_menu_item" href="https://twitter.com/timrodz" data-tooltip class="has-tip" title="Twitter"><span class="fa fa-twitter"></span> <span></span></a>
                <a class="at_icon_menu_item" href="https://www.facebook.com/TRodz24" data-tooltip class="has-tip" title="Facebook"><span class="fa fa-facebook"></span> <span></span></a>
                <a class="at_icon_menu_item" href="https://mad-hyrax.github.io" data-tooltip class="has-tip" title="Sitio web"><span class="fa fa-code"></span></a>
            </div>
        </div>
        <div class="medium-4 columns">
            <div id="at_search">
            	<div class="row">
            		<div class="large-12 large-centered columns">
            			<input class="at_search_input" type="text" placeholder="Buscar...">
            		</div>
            	</div>
            	<div class="at_search_results"></div>
            </div>        </div>
    </div>
</div>
<div id="at_showcase">
	<div class="at_blog_cover" style="background-image: url(../content/images/2014/Sep/Where-Tahrs-Live.jpg)">
	    <div class="at_showcase_overlay at_with_blog_cover">
			<div class="row">
				<div class="large-12 large-centered columns">
					<div class="at_block">
						<div class="text-center">
				            <div class="at_block">
				                <article class="post">
				                    <div class="at_post_header">
				                        <h2 class="at_post_title">Esqueleto básico de un juego (Java)</h2>
				                    </div>
				                    <div class="at_post_meta">
				                        <span class="at_featured_post"><span class="fa fa-bookmark"></span> <span>Featured</span></span>
				                        <span class="at_post_author"><span class="fa fa-user"></span> <a href="../author/juan-alejandro-rodriguez-morais/index.html">Juan Alejandro Rodríguez Morais</a></span>
				                        <time class="at_post_time" datetime="2014-09-03"><span class="fa fa-calendar"></span> 03 Sep 2014</time>
				                        <span class="at_post_tags"> </span>
				                    </div>
					                <div class="at_post_share">
					                    <h6 class="at_post_share_title">Comparte este post</h6>
					                    <a class="at_post_share_icon" href="http://twitter.com/share?text=Esqueleto%20b%C3%A1sico%20de%20un%20juego%20(Java)&url=http://trodz.github.io/creando-el-esqueleto-de-un-juego-en-java-2/"
					                        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
					                        <span class="fa fa-twitter-square"></span>
					                    </a>
					                    <a class="at_post_share_icon" href="https://www.facebook.com/sharer/sharer.php?u=http://trodz.github.io/creando-el-esqueleto-de-un-juego-en-java-2/"
					                        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
					                        <span class="fa fa-facebook-square"></span>
					                    </a>
					                    <a class="at_post_share_icon" href="https://plus.google.com/share?url=http://trodz.github.io/creando-el-esqueleto-de-un-juego-en-java-2/"
					                       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
					                        <span class="fa fa-google-plus-square"></span>
					                    </a>
					                </div>
				                </article>
				            </div>
						</div>
					</div>
				</div>
			</div>
	    </div>
	</div>
</div>
<div id="at_mainbody" class="at_post" role="main">
    <div class="row">
        <div class="large-12 columns">
            <div class="at_block">
                <article class="post">
                    <div class="at_post_content">
                        <blockquote>
  <p>Los siguientes ejemplos expuestos no son más que ideas propias durante un muy pequeño transcurso del desarrollo de juegos en Java SE, por lo que espero comprendan que no estaré creando el mejor esqueleto, sino que el propósito es ayudar a visualizar uno. </p>
</blockquote>

<p>En Java existen diferentes posibilidades de crear aplicaciones. Tenemos el uso del <strong>JFrame, JPanel y Applet, Canvas</strong> para crear nuestro esqueleto. Una applet se enfoca en poder utilizar la aplicación via web, los demás tienen el propósito de ser un ejecutable de java (<strong>.jar</strong>).</p>

<p>A continuación presentaré un esqueleto básico con un <strong>JPanel</strong> y luego iré explicando sus huesos:</p>

<pre><code class="language-java">import javax.swing.*;  
import java.awt.*;  
import java.awt.event.KeyEvent;  
import java.awt.event.KeyListener;

public class Esqueleto extends JPanel implements Runnable, KeyListener {


    static final int ancho = 400, alto = 300, escala = 2;
    // Imagenes por segundo deseadas
    private int FPS = 60;
    // Transformamos 60 segundos a milisegundos:
    private long tiempoDeseado = 1000 / FPS;
    // hilo que correra en run()
    private Thread thread;
    private boolean corriendo = false;

    public Esqueleto() {
        new Cerebro(ancho * escala, alto * escala, "Esqueleto en Java", this);
        setFocusable(true);
        addKeyListener(this);
        requestFocus();
    }

    public static void main(String[] arg) {
        new Esqueleto();
    }

    //Game loop (bucle infinito)
    @Override
    public void run() {

        while (running) {
            // métodos a repetir aquí
            repaint();


            // Estrategia de búfer
            long inicio, tiempoTranscurrido, espera;

            inicio = System.nanoTime();

            tiempoTranscurrido = System.nanoTime() - inicio;

            espera = tiempoDeseado - tiempoTranscurrido / 1000000;

            if (espera &lt; 0) espera = 5;

            try {
                Thread.sleep(espera);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        } // Fin del bucle infinito
    }

    public synchronized void iniciar() {
        if (running) return;
        if (thread == null) {
            thread = new Thread(this);
            thread.start();
            running = true;
        }
    }

    void paint(Graphics g) {
        super.paint(g);
        // Contenido a dibujar

    }

    Override
    public void keyPressed(KeyEvent e) {
        // Escucha cuando un evento (tecla) es presionado.

    }

    @Override
    public void keyReleased(KeyEvent e) {
        // Esto escucha cuando un evento deja de ser presionado

    }

    @Override
    public void keyTyped(KeyEvent e) {
          // Similar a KeyPressed. Pero para los juegos es mejor usar KeyPressed.

    }

} // Fin de la clase Esqueleto



/* Tendremos otra clase que se encargará de crear nuestra ventana mediante un constructor a gusto propio. */

class Cerebro {

    public Cerebro(int ancho, int alto, String tituloDeVentana, Esqueleto esqueleto) {

        JFrame ventana = new JFrame(tituloDeVentana);
        ventana.setPreferredSize(new Dimension(ancho, alto));
        ventana.setMaximumSize(new Dimension(ancho,   alto));
        ventana.setMinimumSize(new Dimension(ancho,   alto));
        ventana.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        ventana.setResizable(false);
        ventana.setLocationRelativeTo(null);
        ventana.add(esqueleto);
        ventana.setVisible(true);
        esqueleto.iniciar();

    }

}
</code></pre>

<h2 id="explicandoelcdigo">Explicando el código</h2>

<pre><code>import javax.swing.*;
import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
</code></pre>

<p>Aquí simplemente se importan las librerías que planeamos usar en nuestro código y varían dependiendo de nuestras necesidades.</p>

<pre><code>public class Esqueleto extends JPanel implements Runnable, KeyListener {  }
</code></pre>

<p>Declaramos nuestra clase y extendemos la clase JPanel. Ya que una clase es un molde para un objeto, una superclase es un molde para clases (En nuestro caso es el <strong>JPanel</strong>).</p>

<pre><code>public class automovil {

    int llantas = 4;
    int precio = 40500;
    String motor = "2.4L 201hp";
    int luces = 4;
    boolean prendido = false;

}

public class HondaCivic extends automovil {

    String color = "negro";
    String rines = "de fábrica";

}
</code></pre>

<p>Ahora nuestro HondaCivic tendrá todas las propiedades y métodos de la clase Automóvil, significando esto que podrán ser usadas por nuestro HondaCivic cuando queramos.</p>

<p>Luego del <strong>extends JPanel</strong> tenemos <strong>implements Runnable, KeyListener</strong>. Aquí estamos implementando dos interfaces: <strong>Runnable y KeyListener</strong>. Una interfaz es una colección de métodos abstractos Cuando implementamos interfaces debemos pensar en una especie de acuerdo entre nuestra clase y las interfaces. Este acuerdo va de la siguiente manera: <br />
Runnable y KeyListener le dicen a esqueleto "Hey, puedes utilizarnos si haces lo que te ordenemos, y esto es que utilices nuestros métodos". Entonces, cuando implementemos una interfaz <strong>debemos</strong> generar sus métodos, sino nuestro programa <strong>no funcionará</strong>.</p>

<pre><code>static final int ancho = 400, alto = 300, escala = 2;
private int FPS = 60;
private long tiempoDeseado = 1000 / FPS;
private Thread thread;
</code></pre>

<p>Esta es una simple declaración de atributos. <strong>ancho, alto y escala</strong> determinarán las dimensiones de nuestra ventana. <strong>FPS</strong> son la cantidad de imágenes por segundo que queremos que nuestro juego muestre. <strong>tiempoDeseado</strong> es una conversión de FPS a milisegundos. El <strong>thread</strong> es la creación de nuestro proceso de ejecución (implementado por <strong>Runnable</strong>).</p>

<pre><code>public Esqueleto() {
    super();
    setPreferredSize(new Dimension(ancho * escala, alto * escala));
    setFocusable(true);
    requestFocus();
}
</code></pre>

<p>Estamos llamando al constructor de nuestra clase Esqueleto. En Java, un constructor inicializa nuestro objeto con instrucciones que le damos ahí. Por default, si no tenemos un constructor, Java lo crea cuando interpreta el programa y lo construye sin ninguna variable dentro. Otro dato, pueden haber más de 2 constructores para cualquier clase, y veremos diferentes tipos en mi próximo tutorial.</p>

<ul>
<li><p><strong>super()</strong>: Aquí llamados al método de nuestra clase para generar un JPanel con doble búfer y un diseño de flujo optimizado.</p></li>
<li><p><strong>setPreferredSize(new Dimension(ancho * escala, alto * escala));</strong> Creamos un tamaño con nuevas dimensiones y las especificamos a nuestro gusto multiplicadas por una escala. ¿Por qué la escala? Pues, si nuestra ventana tiene dimensiones de <strong>800x600</strong> correrá con menor rendimiento que una de <strong>400(2)x300(2)</strong>.</p></li>
<li><strong>setFocusable();</strong> determina el estado de enfoque para este componente, o sea que apenas nuestro juego empieze, llamará la atención de la computadora para que esta le preste la atención solicitada . </li>
<li><p><strong>requestFocus();</strong> habilita la comunicación entre la entrada y nuestra ventana (Sin este método no captará eventos. </p>

<pre><code>public static void main(String[] arg) {
    JFrame frame = new JFrame("Esqueleto");
    frame.add(new Esqueleto());
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setResizable(false);
    frame.setVisible(true);
}
</code></pre></li>
</ul>

<p>Creamos el método <strong>main</strong> y un <strong>JFrame</strong> como el siguiente:</p>

<ul>
<li><p><strong>frame.add(new Esqueleto());</strong> Creamos a nuestro esqueleto dentro de la frame. Va a realizar todo lo que el esqueleto hace. 
<strong>IMPORTANTE</strong>: si llegaramos a meter nuestro método principal en otra clase, debemos remplazar <strong>frame.add(new clase());</strong> por <strong>frame.setContentPane(new claseConMetodoMain());</strong></p></li>
<li><p><strong>frame.setDefaultCloseOperations(JFrame.EXIT_ ON_CLOSE);</strong> Indicamos que nuestra ventana tendrá una operación para cerrarla determinada, y es cuando le demos a la X para cerrar.</p></li>
<li><p><strong>frame.pack();</strong> Esta instrucción agarra el constructor del esqueleto y revisa sus instrucciones. Una vez las toma, especifíca las dimensiones que le hemos dado, junto con el setFocusable() y el requestFocus().</p></li>
<li><p><strong>frame.setLocationRelativeTo(null);</strong> Aquí le decimos a Java que, con nuestras dimensiones ya dadas, asigne una posición relativa entre nuestra ventana y monitor. el parámetro <strong>null</strong> simplemente indica que estará en la mitad tanto para ancho como alto.</p></li>
<li><p><strong>frame.setResizable(false);</strong> Esta instrucción indica que NO queremos que las dimensiones de nuestra ventana sean alteradas por el usuario, ya que causaría muchos problemas.</p></li>
<li><p><strong>frame.setVisible(true);</strong> Hace que nuestra pantalla sea visible.</p></li>
</ul>

<p>La parte del bucle infinito es explicada más a fondo en <a href="http://timrodriguez.ghost.io/estrategia-de-bufer/">este</a> post.</p>
                    </div>
                    <h3>About Author</h3>
                    <div class="at_author">
                        <div class="row">
                            <div class="medium-2 columns show-for-medium-up">
                                <div class="at_author_image">
                                    <img src="../content/images/2014/Sep/avatarghost.png" alt="Juan Alejandro Rodríguez Morais">
                                </div>
                            </div>
                            <div class="medium-10 columns">
                                <div class="at_author_name">
                                    <h3>Juan Alejandro Rodríguez Morais</h3>
                                </div>
                                <div class="at_author_bio">
                                    <p>Estudiante de programación, amante del pixel art, la fotografía, la música y el game design.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="at_post_comments">
                        <div id="at_disqus">
                            <div id="disqus_thread">
                        		<a class="button small radius" href="index.html#" onclick="atPost.loadDisqus();return false;"><span class="fa fa-comments"></span> Comentar</a>
                            </div>
                        </div>                    </div>
                </article>
            </div>
        </div>
    </div>
</div>
<div id="at_footer">
	<div class="row">
		<div class="large-12 columns text-center">
			<div class="at_block">
				<div class="copyright">
					<span>&copy; 2014 <a href="http://trodz.github.io/">El aprendiz del game design</a> - Free Ghost Theme<br />Powered by <a href="http://foundation.zurb.com/">Foundation 5 Framework</a> and <a href="http://bourbon.io/">Bourbon Sass Mixins Library</a></span>
				</div>
				<div class="poweredby">
					<span>Orgullosamente publicado con <a class="icon-ghost" href="http://ghost.org">Ghost</a></span>
				</div>
			</div>
		</div>
	</div>
</div>
        </div>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../assets/js/jquery-2.1.0.min.js"><\/script>')</script>

    <script>
        /*** CONFIGURATION VARIABLES: EDIT THE VALUES BELOW FOR THEME CONFIGURATION ***/
        var ghostionConfig = {
            site_url:                       "ghostion.ghostdemo.axiantheme.com",
            google_fonts_family:            "Open+Sans:400,400italic,700,700italic",
            google_analytics_tracking_id:   "UA-45630355-2",
            disqus_shortname:               "timrodz"
        };
    </script>
    <script src="../assets/js/ghostion.min.js"></script>
</body>
</html>